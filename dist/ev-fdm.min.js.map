{"version":3,"sources":["core/ev-fdm-core.min.js","plugins/leaflet/ev-fdm-leaflet.min.js","plugins/tinymce/ev-fdm-tinymce.min.js","plugins/upload/ev-fdm-upload.min.js"],"names":[],"mappings":"AAAA;AACA;AACA;ACFA;AACA;ACDA;AACA;ACDA;AACA","file":"ev-fdm.min.js","sourcesContent":["function MenuManagerProvider(){function e(e){var t=null;return angular.forEach(n.tabs,function(n){e===n.state&&(t=n)}),t}function t(t){t=t||{},t=e(t.state),t&&(n.activeTab&&(n.lastTab=n.activeTab,n.activeTab.active=!1),t.active=!0,n.activeTab=t)}var n=this;this.tabs=[],this.activeTab=null,this.lastTab=null,this.addTab=function(e){return this.tabs.push(e),this},this.$get=[\"$rootScope\",\"$state\",function(r){return r.$on(\"$stateChangeStart\",function(n,r,a,i){if(\"\"===i.name){var o=e(r.name);o&&t(o)}}),r.$on(\"$stateChangeError\",function(){t(n.lastTab)}),{tabs:n.tabs,selectTab:t}}]}function EvMenuDirective(e){return{restrict:\"E\",replace:!0,template:'<ul class=\"lisette-module-tabs nav nav-tabs\" ng-cloak><li ng-repeat=\"tab in tabs\" ng-class=\"{active: tab.active}\"><a ng-click=\"selectTab(tab)\">{{ tab.name }}</a></li></ul>',controller:[\"$scope\",\"$state\",\"$rootScope\",function(t,n,r){t.tabs=e.tabs,r[\"evmenu-state\"]&&e.selectTab(r[\"evmenu-state\"]),t.selectTab=function(t){e.selectTab(t),n.go(t.state)}}]}}function FilterServiceFactory(e,t){function n(){this.filters={};var n=[],r=this;e.$watch(function(){return r.filters},function(e,n){n!==e&&t(function(){r.modifier?r.modifier.call(r,e,n):r.callListeners()},0)},!0),this.setModifier=function(e){angular.isFunction(e)&&(this.modifier=e)},this.addListener=function(e,t){angular.isFunction(t)&&(n.push(t),e.$on(\"$destroy\",function(){r.removeListener(t)}))},this.removeListener=function(e){angular.forEach(n,function(t,r){t===e&&n.splice(r,1)})},this.callListeners=function(){var e=this;angular.forEach(n,function(t){t(e.filters)})}}return new n}function AjaxStorage(e,t,n,r){function a(n){if(n.cache){var a=JSON.stringify(n),o=i.get(a);if(o)return o}n.id=Fanny.Utils.generateId(\"proxy:request:\");var l={url:\"/backoffice/common/xhr\",method:\"POST\",responseType:\"json\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded; charset=UTF-8\"},data:n},c=e(l).then(function(e){return e.data.success?e.data.result[n.id].data:(r.warn(e.data.error,e.data.errors),e.data.result[n.id].authenticated===!1&&(window.location.href=\"/login?expired=1\"),t.reject(e.data.result[n.id]))});return n.cache&&i.put(a,c),c}var i=n(\"customHttpCache\");return{launchRequest:a}}function Storage(e){return{get:function(t){return e.launchRequest(t)}}}angular.module(\"ev-fdm\",[\"ui.router\",\"ui.date\",\"chieffancypants.loadingBar\",\"ui.bootstrap.tooltip\",\"ui.bootstrap.popover\",\"ui.select2\",\"angularMoment\",\"ngAnimate\",\"checklist-model\",\"ui.bootstrap\",\"restangular\"]).config([\"cfpLoadingBarProvider\",function(e){e.includeSpinner=!1,e.parentSelector=\"#lisette-menu\"}]).config([\"$tooltipProvider\",function(e){e.options({placement:\"bottom\",popupDelay:100}),e.setTriggers({mouseenter:\"mouseleave\",click:\"click\",focus:\"blur\",never:\"mouseleave\",\"focus-not-typing\":\"blur-or-typing\"})}]).config([\"$stateProvider\",function(e){e.state(\"ev-error\",{templateUrl:\"ev-error.phtml\"})}]).config([\"RestangularProvider\",function(){}]).run([\"$rootScope\",\"$state\",\"$location\",\"uiSelect2Config\",function(e,t,n,r){r.minimumResultsForSearch=7,r.allowClear=!0,e.$on(\"$stateChangeStart\",function(t,n){n.state=n.name.split(\".\")[0],e[\"evmenu-state\"]=n}),window.moment.lang([window.navigator.language,\"en\"])}]),angular.module(\"ev-fdm\").animation(\".ev-animate-picture-list\",function(){return{enter:function(e,t){var n=e.width();return e.css(\"width\",0),e.css(\"opacity\",0),jQuery(e).animate({width:n,opacity:1},300,t),function(t){t&&jQuery(e).stop()}},leave:function(e,t){var n=e.width();return e.css(\"opacity\",1),e.css(\"width\",n+\"px\"),jQuery(e).animate({width:0,opacity:.3},300,t),function(t){t&&jQuery(e).stop()}},move:function(e,t){return e.css(\"opacity\",0),jQuery(e).animate({opacity:1},t),function(t){t&&jQuery(e).stop()}},addClass:function(){},removeClass:function(){}}}),angular.module(\"ev-fdm\").animation(\".ev-animate-tag-list\",function(){return{enter:function(e,t){return e.css(\"opacity\",0),jQuery(e).animate({opacity:1},300,t),function(t){t&&jQuery(e).stop()}},leave:function(e,t){return e.css(\"opacity\",1),jQuery(e).animate({opacity:.3},300,t),function(t){t&&jQuery(e).stop()}},move:function(e,t){return e.css(\"opacity\",0),jQuery(e).animate({opacity:1},t),function(t){t&&jQuery(e).stop()}},addClass:function(){},removeClass:function(){}}}),angular.module(\"ev-fdm\").factory(\"ListController\",[\"$state\",\"$stateParams\",\"Restangular\",function(e,t,n){function r(e,t,n,r,a){var i=this;this.$scope=e,this.elementName=t,this.elements=n,this.defaultSortKey=r,this.defaultReverseSort=a,this.sortKey=this.defaultSortKey,this.reverseSort=this.defaultReverseSort,this.updateScope(),this.$scope.changePage=function(e){i.update(e,i.filters,i.sortKey,i.reverseSort)},this.$scope.sortChanged=function(){i.sortKey=i.$scope.sortKey,i.reverseSort=i.$scope.reverseSort,i.update(1,i.filters,i.sortKey,i.reverseSort)},this.$scope.toggleDetailView=function(e){i.toggleView(\"view\",e)},this.$scope.$on(\"common::filters.changed\",function(e,t){i.filters=t,i.sortKey=i.defaultSortKey,i.defaultReverseSort=i.defaultReverseSort,i.update(1,i.filters,i.sortKey,i.reverseSort)}),this.$scope.$on(\"$stateChangeSuccess\",function(e,t){t.name===i.elementName?i.$scope.activeElement=null:i.setActiveElement()}),this.$scope.$on(this.elementName+\"::updated\",function(){i.update(i.$scope.currentPage,i.filters,i.sortKey,i.reverseSort)}),this.$scope.$on(this.elementName+\"::created\",function(){i.update(i.$scope.currentPage,i.filters,i.sortKey,i.reverseSort)}),this.$scope.$on(this.elementName+\"::deleted\",function(){i.update(i.$scope.currentPage,i.filters,i.sortKey,i.reverseSort)})}return r.prototype.update=function(e,t,n,r){var a=this;a.fetch(e,t,n,r).then(function(e){a.elements=e,a.updateScope()})},r.prototype.updateScope=function(){this.$scope[this.elementName]=this.elements,this.$scope.currentPage=this.elements.pagination.current_page,this.$scope.pageCount=this.elements.pagination.total_pages,this.$scope.sortKey=this.sortKey,this.$scope.reverseSort=this.reverseSort,this.$scope.selectedElements=[],this.setActiveElement()},r.prototype.setActiveElement=function(){var t=this;this.$scope.activeElement=null,angular.isDefined(e.params.id)&&angular.forEach(this.elements,function(r){var a=n.configuration.getIdFromElem(r);a==e.params.id&&(t.$scope.activeElement=r)})},r.prototype.toggleView=function(r,a){if(!a)return void e.go(this.elementName);var i=n.configuration.getIdFromElem(a);i&&t.id!==i?e.go(this.elementName+\".\"+r,{id:i}):e.go(this.elementName)},r}]);var NotificationsController=[\"$scope\",\"NotificationsService\",function(e,t){e.notifications=t.list,e.$watch(function(){return t.activeNotification},function(){e.activeNotification=t.activeNotification}),e.getClass=function(e){if(!e)return\"\";switch(e.type){case t.type.ERROR:return\"danger\";case t.type.SUCCESS:return\"success\";case t.type.WARNING:return\"warning\";case t.type.INFO:return\"info\";default:return\"success\"}},e.remove=function(e){t.remove(e)}}];angular.module(\"ev-fdm\").controller(\"NotificationsController\",NotificationsController),angular.module(\"ev-fdm\").factory(\"SearchController\",[\"$rootScope\",function(e){function t(t){var n=this;this.$scope=t,this.$scope.filters={},this.$scope.filtersChanged=function(){e.$broadcast(\"common::filters.changed\",n.$scope.filters)}}return t}]),angular.module(\"ev-fdm\").directive(\"activableSet\",function(){return{restrict:\"A\",scope:!1,controller:[\"$scope\",\"$attrs\",\"$parse\",function(e,t,n){var r=n(t.activeElement),a=r.assign,i=this;e.$watch(function(){return r(e)},function(e){i.activeElement=e}),this.toggleActive=function(n){n!==this.activeElement?(a&&a(e,n),this.activeElement=n):(a&&a(e,null),this.activeElement=void 0),e.$eval(t.activeChange)}}]}}).directive(\"activable\",[\"$parse\",function(e){return{restrict:\"A\",require:\"^activableSet\",link:function(t,n,r,a){n.addClass(\"clickable\");var i=e(r.activable),o=i(t);t.$watch(function(){return i(t)},function(e){o=e}),t.$watch(function(){return a.activeElement},function(e){e&&o===e?n.addClass(\"active\"):n.removeClass(\"active\")}),n.on(\"click\",function(e){$(e.target).closest(\".block-active\").length||e.ctrlKey||e.shiftKey||t.$apply(function(){a.toggleActive(o)})})}}}]);var module=angular.module(\"ev-fdm\");module.directive(\"clearable\",[function(){return{restrict:\"A\",require:\"ngModel\",link:function(e,t,n,r){var a=angular.element('<button class=\"clear\" ng-click=\"clear()\">×</button>');t.after(a),a.on(\"click\",function(){e.$apply(function(){t.val(\"\"),r.$setViewValue(\"\")})}),e.$watch(function(){return r.$isEmpty(r.$viewValue)},function(e){e?a.hide():a.show()})}}}]),angular.module(\"ev-fdm\").directive(\"evDatepicker\",function(){return{restrict:\"A\",require:\"ngModel\",link:function(e,t,n,r){var a=\"false\"!==n.futurAllowed,i=n.dateFormat||\"dd/mm/yy\";$(function(){t.datepicker({dateFormat:i,maxDate:a?null:0,onSelect:function(t){r.$setViewValue(t),e.$apply()}})})}}}),angular.module(\"ev-fdm\").directive(\"download\",[\"$http\",\"$location\",\"$document\",\"DownloadService\",function(e,t,n,r){return{link:function(t,n,a){n.on(\"click\",function(){e.get(a.download).success(function(e){r.download(e.url)})})}}}]),angular.module(\"ev-fdm\").directive(\"ngEnter\",function(){return function(e,t,n){t.bind(\"keydown keypress\",function(t){13===t.which&&(e.$apply(function(){e.$eval(n.ngEnter)}),t.preventDefault())})}}),angular.module(\"ev-fdm\").provider(\"menuManager\",[MenuManagerProvider]).directive(\"evMenu\",[\"menuManager\",EvMenuDirective]);var module=angular.module(\"ev-fdm\");module.directive(\"evFilters\",function(){return{restrict:\"E\",replace:!0,transclude:!0,templateUrl:\"filters.phtml\"}}),function(){\"use strict\";angular.module(\"ev-fdm\").directive(\"evFixedHeader\",function(){return{link:function(e,t,n){t.addClass(\"full-height\");var r=t.find(\">.ev-header\"),a=t.find(\">.ev-body\");a.css({\"overflow-y\":\"auto\"}),r.css({\"overflow-y\":\"auto\"});var i=function(){var e=t.innerHeight()-r.outerHeight(!0);return e-=a.outerHeight()-a.height()},o=function(){a.hide(),a.height(i()),a.show(),n.refreshIdentifier&&e.$broadcast(\"evFullHeightBody::refresh::\"+n.refreshIdentifier)};e.$watch(function(){return i()},o),$(window).bind(\"resize\",o),n.refreshOn&&e.$on(\"evFullHeightBody::refresh::\"+n.refreshOn,o)}}})}(),angular.module(\"ev-fdm\").directive(\"evFixedHeaders\",[\"$timeout\",function(e){function t(e,t){var n,r,a=angular.element(\".table-container\"),i=angular.element(\".ev-fixed-header-table-container\");return a.length?void t.$watch(function(){return n=a.height(),r=a.width(),n+\"-\"+r},function(){i.height(n),i.width(r),e.floatThead(\"reflow\")}):void console.log(\"Table should be wrapped inside a div having 'table-container' class to use evFixedHeaders directive\")}function n(n,r){e(function(){t(n,r)},0,!1)}return{restrict:\"A\",replace:!1,scope:{rows:\"=\"},link:function(e,r){var a=$(r);a.wrap('<div class=\"ev-fixed-header-table-container\"></div>').floatThead({scrollContainer:function(e){return e.closest(\".ev-fixed-header-table-container\")}}),$(window).on(\"resize\",function(){t(a,e)}),e.$on(\"module-layout-changed\",function(){n(a,e)}),e.$watch(\"rows\",function(){n(a,e)},!0),n(a,e)}}}]);var module=angular.module(\"ev-fdm\").directive(\"evFlag\",function(){return{restrict:\"E\",replace:!0,scope:{lang:\"=\"},template:'<i class=\"icon icon-flag flag-{{lang}}\"></i>'}});angular.module(\"ev-fdm\").directive(\"focus\",[function(){return{link:function(e,t){e.$evalAsync(function(){t[0].focus()})}}}]),angular.module(\"ev-fdm\").directive(\"linkDisabled\",function(){return{restrict:\"A\",link:function(e,t,n){var r=n.ngClick;r&&e.$watch(n.linkDisabled,function(a,i){a?(t.unbind(\"click\"),t.attr(\"disabled\",\"disabled\")):i&&(n.$set(\"ngClick\",r),t.bind(\"click\",function(){e.$apply(n.ngClick)}),t.removeAttr(\"disabled\"))})}}});var module=angular.module(\"ev-fdm\").directive(\"evLoadingDots\",function(){return{restrict:\"E\",replace:!0,template:'<span class=\"loading-dots\"><span></span><span></span><span></span></span>'}});angular.module(\"ev-fdm\").directive(\"evModule\",[\"$timeout\",\"$rootScope\",function(e,t){function n(e){return function(){angular.forEach(r,function(t,n){var r=e.find(\".lisette-module-\"+n),a=\"has-\"+n;e.removeClass(_(t.versions).map(function(e){return n+\"-\"+e}).join(\" \")),r.length?(e.addClass(a),angular.forEach(t.versions,function(t){r.hasClass(\"version-\"+t)&&e.addClass(n+\"-\"+t)})):e.removeClass(a)}),t.$broadcast(\"module-layout-changed\")}}var r={tabs:{versions:[]},topbar:{versions:[\"size-mini\",\"size-default\",\"size-big\"]},leftbar:{versions:[]},bottombar:{versions:[]}};return{restrict:\"A\",link:function(t,r){r.addClass(\"lisette-module\"),t.$on(\"$stateChangeSuccess\",function(){e(n(r),0)}),e(n(r),0)}}}]),angular.module(\"ev-fdm\").directive(\"evModuleHeader\",[\"$timeout\",function(e){function t(e){var t=e.find(\".lisette-module-header\");e.height(t.height()-1),t.affix({offset:{top:1}})}return function(n,r){var a=$(r);e(function(){t(a)},0,!1),$(window).on(\"resize\",function(){t(a)}),n.$on(\"itemsLoaded\",function(){t(a)})}}]),angular.module(\"ev-fdm\").directive(\"mouseFollower\",[\"$document\",function(e){return{restrict:\"A\",link:function(t,n){n=angular.element(n),n.css(\"position\",\"absolute\"),n.css(\"z-index\",1500),e.on(\"mousemove\",function(e){n.css({left:e.pageX,top:e.pageY})})}}}]);var module=angular.module(\"ev-fdm\").directive(\"evPagination\",[function(){var e=\"...\";return{restrict:\"AE\",replace:!0,templateUrl:\"pagination.phtml\",scope:{currPage:\"=\",nbPage:\"=\",onPageChange:\"=\"},link:function(t){t.paginationButtons=[],t.prevClass=\"\",t.nextClass=\"\",t.currPage||(t.currPage=1),t.nbPage||(t.nbPage=1),t.generateButtons=function(){var n=2;t.paginationButtons=[],t.paginationButtons.push({value:1,\"class\":1==t.currPage?\"active\":\"\"}),t.currPage-n>2&&t.paginationButtons.push({value:e,\"class\":\"disabled\"});for(var r=n;r>0;r--)t.currPage-r>1&&t.paginationButtons.push({value:t.currPage-r});1!=t.currPage&&t.currPage!=t.nbPage&&t.paginationButtons.push({value:t.currPage,\"class\":\"active\"});for(var r=1;n>=r;r++)t.currPage+r<t.nbPage&&t.paginationButtons.push({value:t.currPage+r});t.currPage+n<t.nbPage-1&&t.paginationButtons.push({value:e,\"class\":\"disabled\"}),t.nbPage>1&&t.paginationButtons.push({value:t.nbPage,\"class\":t.currPage==t.nbPage?\"active\":\"\"})},t.previousPage=function(){t.currPage>1&&(t.currPage--,angular.isFunction(t.onPageChange)&&t.onPageChange(t.currPage))},t.changePage=function(n){n!=e&&n>=1&&n<=t.nbPage&&(t.currPage=n,angular.isFunction(t.onPageChange)&&t.onPageChange(n))},t.nextPage=function(){t.currPage<t.nbPage&&(t.currPage++,angular.isFunction(t.onPageChange)&&t.onPageChange(t.currPage))},t.$watch(\"nbPage + currPage\",function(){t.generateButtons()})}}}]),module=angular.module(\"ev-fdm\");module.directive(\"evPanelBreakpoints\",[\"$timeout\",\"$rootScope\",function(e,t){function n(e){var t,n;for(n=0;n<i.length;n++)if(e<i[n]){t=i[n];break}return t?n:-1}function r(e,t){var n=\"\";n=-1==t?\"max\":i[t],e.attr(\"data-breakpoint\",n)}function a(e){var t=n(e.outerWidth());r(e,t)}var i=[100,200,300,400,500,600,700,800,900,1e3,1100];return{restrict:\"A\",scope:!1,replace:!0,transclude:!0,template:\"<div ng-transclude></div>\",link:function(n,r){r.resizable({handles:\"w\",helper:\"ui-resizable-helper\",resize:function(){a(r)}}),t.$on(\"module-layout-changed\",function(){a(r)}),e(function(){a(r),r[0].focus()})}}}]),function(){\"use strict\";angular.module(\"ev-fdm\").directive(\"evPictureList\",function(){return{restrict:\"EA\",scope:{pictures:\"=\",editable:\"=\",onDelete:\"&\",onChange:\"&\",showUpdate:\"=\"},template:'<ul class=\"picture-list\"><li ng-repeat=\"picture in pictures\" class=\"ev-animate-picture-list\"><figure><div class=\"picture-thumb\" style=\"background-image: url(\\'{{picture.id | imageUrl:245:150 | escapeQuotes }}\\');\"><button class=\"action update-action ev-upload-clickable\"ng-click=\"onUpdate({picture: picture, index: $index})\" data-ng-show=\"editable & showUpdate\"><span class=\"icon icon-edit\"></span></button><button class=\"action delete-action\" ng-click=\"onDelete({picture: picture, index: $index})\" data-ng-show=\"editable\"><span class=\"icon icon-bin\"></span></button></div><figcaption><span class=\"copyright\">&copy;</span><span class=\"author\" data-ng-show=\"!editable\">{{ picture.author }}</span><span data-ng-show=\"editable\"><input type=\"text\" class=\"form-control author\" ng-model=\"picture.author\" ng-change=\"onChange({picture: picture})\"/></span></figcaption></figure></li></ul><div class=\"clearfix\"></div>',link:function(e,t,n){n.onDelete||(e.onDelete=function(t){e.pictures.splice(t.index,1)},e.onUpdate=function(e){console.log(\"et la maintenant ça update\"),console.log(e)}),e.pictures=e.pictures||[]}}})}(),function(){\"use strict\";angular.module(\"template/popover/popover.html\",[]).run([\"$templateCache\",function(e){e.put(\"template/popover/popover.html\",'<div class=\"popover {{placement}}\" ng-class=\"{ in: isOpen(), fade: animation() }\">\\n  <div class=\"arrow\"></div>\\n\\n  <div class=\"popover-inner\">\\n      <h3 class=\"popover-title\" ng-bind-html=\"title\" ng-show=\"title\"></h3>\\n      <div class=\"popover-content\"ng-bind-html=\"content\"></div>\\n  </div>\\n</div>\\n')}]),angular.module(\"ev-fdm\").directive(\"popover\",[\"$timeout\",function(e){return{restrict:\"A\",link:function(t,n){var r;n.bind(\"focus\",function(){n.triggerHandler(\"focus-not-typing\")}),n.bind(\"blur\",function(){r&&e.cancel(r),n.triggerHandler(\"blur-or-typing\")}),n.bind(\"keypress\",function(){r&&e.cancel(r),n.triggerHandler(\"blur-or-typing\"),r=e(function(){n.triggerHandler(\"focus-not-typing\")},1e3)})}}}])}(),angular.module(\"ev-fdm\").directive(\"promise\",[function(){function e(e,t){t.removeClass(\"promise-resolved promise-resolving promise-empty promise-rejected\"),t.addClass(e)}return{restrict:\"A\",replace:!1,controller:[\"$scope\",\"$attrs\",\"$parse\",\"$element\",function(t,n,r,a){var i=r(n.promise),o=n.emptyMessage,l=\"false\"!==n.promiseDefaultStyles;l&&e(\"promise-default-styles\",a),o&&a.append('<div class=\"promise-empty-message\">'+o+\"</div>\"),t.$watch(function(){return i(t)},function(t){t?(e(\"promise-resolving\",a),t.then(function(t){return o&&angular.isArray(t)&&!t.length?e(\"promise-resolved promise-empty\",a):e(\"promise-resolved\",a),t},function(){e(\"promise-rejected\",a)})):e(\"promise-resolved\",a)})}]}}]),function(){\"use strict\";angular.module(\"ev-fdm\").directive(\"evPromiseProgress\",[function(){return{restrict:\"A\",replace:!0,scope:{promise:\"=evPromiseProgress\"},template:'<div role=\"progressbar\" class=\"ev-progress\" aria-valuemin=\"0\" aria-valuemax=\"100\"aria-valuenow=\"0\"> <div class=\"ev-progress-overlay\"></div> </div> ',link:function(e,t){var n=t.find(angular.element(document.querySelector(\".ev-progress-overlay\")));n.css({width:\"0%\"}),e.$watch(\"promise\",function(e){e&&e.then&&(n.css({width:\"0%\"}),e.then(null,null,function(e){\"object\"==typeof e&&(e=e.progress),n.css({width:e+\"%\"})}),e.finally(function(){n.css({width:\"100%\"})}))})}}}])}(),angular.module(\"ev-fdm\").directive(\"body\",[\"$rootScope\",\"NotificationsService\",\"$state\",function(e,t,n){return{restrict:\"E\",link:function(r,a){e.$on(\"$stateChangeStart\",function(e,t){var r=n.current.name.indexOf(\".\"),a=-1!=r?n.current.name.substring(0,r):n.current.name;a&&0===t.name.indexOf(a)||$(\"body\").addClass(\"state-resolving\")}),e.$on(\"$stateChangeSuccess\",function(){a.removeClass(\"state-resolving\")}),e.$on(\"$stateChangeError\",function(e,r){$(\"body\").removeClass(\"state-resolving\");var a=r.fallback&&r.fallback.message||\"Error\";t.addError({text:a}),r&&r.fallback&&r.fallback.state&&n.go(r.fallback.state)})}}}]),angular.module(\"ev-fdm\").provider(\"evSelectLanguage\",function(){this.$get=function(){return{availableLang:this.availableLang||[],defaultLang:this.defaultLang}},this.setAvailableLang=function(e){this.availableLang=e},this.setDefaultLang=function(e){this.defaultLang=e}}).directive(\"evSelectLanguage\",[\"evSelectLanguage\",function(e){return{template:'<div class=\"ev-language-tabs\"><div class=\"btn-group\"><button class=\"btn btn-lg btn-default\" ng-repeat=\"lang in availableLang\"ng-class=\"{active: selectedLang===lang}\"ng-click=\"$parent.selectedLang=lang\"><span class=\"ev-icons-flags\" ng-class=\"\\'icon-\\' + lang\"></span></button></div></div>',restrict:\"AE\",scope:{selectedLang:\"=lang\"},link:function(t){t.availableLang=e.availableLang,t.selectedLang||(t.selectedLang=e.defaultLang)}}}]),angular.module(\"ev-fdm\").directive(\"selectableSet\",[function(){return{restrict:\"A\",controller:[\"$scope\",\"$parse\",\"$element\",\"$attrs\",\"$document\",function(e,t,n,r,a){function i(e,t){var n,r,a=o(t),i=Math.min(e,t),u=Math.max(e,t);if(angular.forEach(g,function(e){c(e)}),s.isElementSelected(a)){for(r=i;u>=r;r++)n=o(r),c(n);f=t,g.length=0}else for(g.length=0,r=i;u>=r;r++)n=o(r),l(n),g.push(n)}function o(e){return s.selectableElements[e]}function l(e){s.isElementSelected(e)||s.selectedElements.push(e)}function c(e){var t=s.selectedElements.indexOf(e);t>-1&&s.selectedElements.splice(t,1)}var s=this,u=16,d=t(r.selectedElements);this.selectableElements=[],this.selectedElement=[];var f,g=[];e.$watch(function(){return d(e)},function(){s.selectedElements=angular.isArray(d(e))?d(e):[]}),a.on(\"keydown\",function(e){e.keyCode===u&&n.addClass(\"noselect\")}),a.on(\"keyup\",function(e){e.keyCode===u&&n.removeClass(\"noselect\")}),this.toggleSelection=function(e,t){f=t,g.length=0,this.isElementSelected(e)?c(e):l(e)},this.toggleSelectAll=function(){this.selectedElements.length===this.selectableElements.length?this.selectedElements.length=0:angular.forEach(this.selectableElements,function(e){s.isElementSelected(e)||l(e)})},this.shiftedClick=function(e,t){void 0!==typeof f&&i(f,t)},this.registerElement=function(e){this.selectableElements.push(e)},this.unregisterElement=function(e){var t=this.selectableElements.indexOf(e);t>-1&&this.selectableElements.splice(t,1),t=this.selectedElements.indexOf(e),t>-1&&this.selectedElements.splice(t,1)},this.areAllElementSelected=function(){return this.selectedElements.length===this.selectableElements.length&&0!==this.selectedElements.length},this.isElementSelected=function(e){return s.selectedElements.indexOf(e)>-1}}]}}]).directive(\"selectable\",[\"$parse\",function(e){return{restrict:\"A\",require:[\"^selectableSet\",\"?ngModel\"],link:function(t,n,r,a){function i(e){e.shiftKey?c.shiftedClick(l,t.$index):(e.ctrlKey||angular.element(e.target).is(\".checkbox\"))&&c.toggleSelection(l,t.$index)}var o=e(r.selectable),l=o(t),c=a[0],s=a[1];c.registerElement(l),t.$on(\"$destroy\",function(){c.unregisterElement(l)}),t.$watch(function(){return c.isElementSelected(l)},function(){t.selected=c.isElementSelected(l),s&&s.$setViewValue(t.selected)}),n.on(\"click\",function(e){t.$apply(function(){i(e)})})}}}]).directive(\"selectBox\",function(){return{restrict:\"E\",require:\"^selectable\",replace:!0,template:'<span class=\"checkbox\" ng-class=\"{ active: selected }\"></span>'}}).directive(\"selectAll\",function(){return{restrict:\"E\",require:\"^selectableSet\",scope:!0,template:'<span class=\"checkbox\" ng-class=\"{ active: allSelected }\" ng-click=\"toggleSelectAll()\"></span>',link:function(e,t,n,r){e.toggleSelectAll=function(){r.toggleSelectAll()},e.$watchCollection(function(){return r.areAllElementSelected()},function(){e.allSelected=r.areAllElementSelected()})}}}),angular.module(\"ev-fdm\").directive(\"sortableSet\",function(){return{restrict:\"A\",scope:!1,controller:[\"$scope\",\"$parse\",\"$element\",\"$attrs\",function(e,t,n,r){var a=this;this.reverseSort=!1,this.sortKey=\"\",e.reverseSort=e.reverseSort||!1;var i=t(r.reverseSort),o=i.assign,l=t(r.sortBy),c=l.assign;e.$watch(function(){return i(e)},function(e){a.reverseSort=e}),e.$watch(function(){return l(e)},function(e){a.sortKey=e}),this.sortBy=function(t){t==this.sortKey?this.reverseSort=!this.reverseSort:(this.reverseSort=!1,this.sortKey=t),o&&o(e,this.reverseSort),c&&c(e,this.sortKey),e.$eval(r.sortChange)}}]}}).directive(\"sortable\",function(){return{restrict:\"A\",scope:!1,require:\"^sortableSet\",link:function(e,t,n,r){function a(){r.sortKey===i?(t.removeClass(\"no-sort\"),r.reverseSort?t.removeClass(\"sort-down\").addClass(\"sort-up\"):t.removeClass(\"sort-up\").addClass(\"sort-down\")):t.removeClass(\"sort-up sort-down\").addClass(\"no-sort\")}var i=n.sortable;t.addClass(\"sortable sort\"),e.$watch(function(){return r.sortKey},function(){a()}),e.$watch(function(){return r.reverseSort},function(){a()}),t.on(\"click\",function(){e.$apply(function(){r.sortBy(i)})})}}}),function(){\"use strict\";angular.module(\"ev-fdm\").directive(\"evTab\",function(){return{restrict:\"E\",transclude:!0,scope:{},controller:function(e){var t=e.panes=[];e.select=function(e){angular.forEach(t,function(e){e.selected=!1}),e.selected=!0},this.addPane=function(n){0===t.length&&e.select(n),t.push(n)};var n=function(t){var n;return t.some(function(t){var r=e.isShowed(t);return r&&(n=t),r}),n};this.selectNext=function(){var r=e.selectedIndex(),a=t.slice(r+1);e.select(n(a)||t[r])},this.selectPrevious=function(){var r=e.selectedIndex(),a=t.slice(0,r).reverse();e.select(n(a)||t[r])},e.selectedIndex=function(){for(var e=0;e<t.length;e++){var n=t[e];if(n.selected)return e}},e.isShowed=function(e){return null==e.tabShow||!!e.tabShow}},template:'<div class=\"tabbable\" ev-fixed-header refresh-on=\"tab_container\"><ul class=\"nav nav-tabs ev-header\"><li ng-repeat=\"pane in panes | filter:isShowed\" ng-class=\"{active:pane.selected}\" tooltip=\"{{pane.tabTitle}}\" tooltip-placement=\"bottom\" tooltip-append-to-body=\"true\"><a href=\"\" ng-click=\"select(pane); pane.tabClick()\"> <span ng-show=\"pane.tabIcon\" class=\"icon {{pane.tabIcon}}\"></span> <span ng-hide=\"pane.tabIcon\">{{pane.tabTitle}}</span></a></li></ul><div class=\"tab-content ev-body\" ng-transclude></div></div>',replace:!0}}).directive(\"evPane\",function(){return{require:\"^evTab\",restrict:\"E\",transclude:!0,scope:{tabTitle:\"@\",tabIcon:\"@\",tabClick:\"&\",tabShow:\"=\"},link:function(e,t,n,r,a){r.addPane(e),a(function(e,n){n.$selectNext=r.selectNext,n.$selectPrevious=r.selectPrevious,t.find(\".transclude\").append(e)})},template:'<div class=\"tab-pane\" ng-class=\"{active: selected}\"><div class=\"section transclude\"></div></div>',replace:!0}})}(),angular.module(\"ev-fdm\").directive(\"evTagList\",function(){return{restrict:\"EA\",scope:{elements:\"=\",editable:\"=\",className:\"@\",maxElements:\"=\",maxAlertMessage:\"@\"},replace:!0,template:'<ul class=\"list-inline {{ className }}\"><li ng-repeat=\"element in elements track by element.name\" class=\"ev-animate-tag-list\"><span class=\"label label-default\" >{{ element.name }}<button ng-show=\"editable\" type=\"button\" class=\"close inline\" ng-click=\"remove($index)\">×</button> </span></li><li ng-show=\"editable && elements.length >= maxElements\" class=\"text-warning\"> {{ maxAlertMessage }}</li></ul>',link:function(e){e.remove=function(t){e.elements.splice(t,1)}}}});var module=angular.module(\"ev-fdm\");module.directive(\"throttle\",[\"$timeout\",function(e){return{restrict:\"A\",require:\"ngModel\",priority:1,link:function(t,n,r,a){var i=a.$setViewValue,o=angular.copy(a.$viewChangeListeners);a.$viewChangeListeners=[];var l;a.$setViewValue=function(t){var n=a.$modelValue!==t;i.apply(a,[t]),n&&(l&&e.cancel(l),l=e(function(){angular.forEach(o,function(e){try{e()}catch(t){$exceptionHandler(t)}})},600))}}}}]),angular.module(\"ev-fdm\").directive(\"evValue\",function(){return{restrict:\"E\",replace:!0,scope:{value:\"=\",noValue:\"@\"},templateUrl:\"value.phtml\"}}),angular.module(\"ev-fdm\").factory(\"FilterService\",[\"$rootScope\",\"$timeout\",FilterServiceFactory]),angular.module(\"ev-fdm\").factory(\"Select2Configuration\",[\"$timeout\",function(e){return function(t,n,r,a,i){var o,l=\"\",c={minimumInputLength:angular.isDefined(a)&&angular.isNumber(a)?a:3,allowClear:!0,query:function(n){var a=l===n.term?0:600;l=n.term,o&&e.cancel(o),o=e(function(){t(n.term,n.page).then(function(e){var t=[];r&&angular.forEach(e,function(e){t.push(r(e))});var a={results:t.length?t:e};if(e.pagination&&e.pagination.current_page<e.pagination.total_pages&&(a.more=!0),i&&n.term.length){var o={id:null};if(o[i]=n.term,a.results.length){var l=a.results.shift();a.results.unshift(l,o)}else a.results.unshift(o)}n.callback(a)})},a)},formatResult:function(e){return n(e)},formatSelection:function(e){return n(e)},initSelection:function(){return{}}};return c}}]),\"undefined\"==typeof Fanny&&(Fanny={}),Fanny.Utils={generatedIds:{},generateId:function(e){var t=e+1e4*Math.random();return this.generatedIds[t]=!0,t},convertNumberToString:function(e,t,n){var r=\" \",a=\",\",i=\"\",o=[],l=\"\",c=\"\",s=\"\";if(\"undefined\"==typeof t&&(t=2),i=e+\"\",o=i.split(\".\"),o.length<1&&o.length>2)throw new Error(\"Invalid number\");if(l=o[0],1==o.length){c=\"\";for(var u=0;t>u;u++)c+=\"0\"}else if(c=o[1],c.length>t)c=c.substring(0,2);else for(;c.length<t;)c+=\"0\";for(var u=0;u<l.length;u++)u%3==0&&0!=u&&(s=r+s),s=l[l.length-u-1]+s;\"\"==s&&(s=\"0\");for(var u=s.length;n>u;u++)s=\"0\"+s;return c.length>0&&(s+=a+c),s},stringToVar:function(e){if(\"string\"!=typeof e)throw new Error(\"Not a string\");if(!isNaN(e))return parseInt(e);for(var t=e.split(\".\"),n=window,r=0;r<t.length;r++){if(!t[r].length||\"undefined\"==typeof n[t[r]])throw new Error(\"No corresponding var found for \"+e);n=n[t[r]]}return n},formatDate:function(e){if(!e||\"object\"!=typeof e)return\"\";var t=e.getFullYear(),n=this.convertNumberToString(e.getMonth()+1,0,2),r=this.convertNumberToString(e.getDate(),0,2);return t+\"-\"+n+\"-\"+r},Renderers:{date:function(e){var t=null,n=null;return t=e&&\"object\"==typeof e?e.date:e,\"string\"==typeof t&&t?(t=t.split(\" \")[0],n=t.split(\"-\"),3===n.length?n[2]+\"/\"+n[1]+\"/\"+n[0]:\"\"):\"\"},amounts:function(e){var t=Fanny.Utils.convertNumberToString(e,2);return e>=0?t:$(\"<span>\").addClass(\"text-orange\").html(t)},money:function(e,t){var n=t&&t.currency&&t.currency.symbole?t.currency.symbole:\"€\",r=Fanny.Utils.convertNumberToString(e,2)+\" \"+n;return e>=0?r:$(\"<span>\").addClass(\"text-orange\").html(r)},euros:function(e){var t=Fanny.Utils.convertNumberToString(e,2)+\" €\";return e>=0?t:$(\"<span>\").addClass(\"text-orange\").html(t)},upper:function(e){return\"string\"==typeof e?e.toUpperCase():e}}},angular.module(\"ev-fdm\").filter(\"cleanupDate\",function(){return function(e){var t=\"\";if(e){var n=e.slice(0,4),r=e.slice(5,7),a=e.slice(8,10);t=a+\"/\"+r+\"/\"+n}return t}}),angular.module(\"ev-fdm\").filter(\"cssify\",function(){return function(e,t){var n=\"\";if(t)for(var r in t)if(t.hasOwnProperty(r)&&e==r){n=t[r];break}return n}}),angular.module(\"ev-fdm\").filter(\"prettySecs\",[function(){return function(e){var t=parseInt(e,10),n=Math.floor(t/3600),r=Math.floor((t-3600*n)/60),a=t-3600*n-60*r;10>n&&(n=\"0\"+n),10>r&&(r=\"0\"+r),10>a&&(a=\"0\"+a);var i=n+\":\"+r+\":\"+a;return i}}]),angular.module(\"ev-fdm\").filter(\"replace\",[function(){return function(e,t,n){return angular.isDefined(e)?e.replace(t,n||\"\"):\"\"}}]),angular.module(\"ev-fdm\").filter(\"sum\",[\"$parse\",function(e){return function(t,n){if(!angular.isDefined(t))return 0;var r=e(n);return t.reduce(function(e,t){var n=r(t);return e+(angular.isDefined(n)&&angular.isNumber(n)?parseFloat(n):0)},0)}}]),angular.module(\"ev-fdm\").filter(\"unsafe\",[\"$sce\",function(e){return function(t){return e.trustAsHtml(t)}}]);var module=angular.module(\"ev-fdm\");module.service(\"communicationService\",[\"$rootScope\",function(e){var t=\"evfdm-communication\",n=function(t,n){e.$emit(t,n)},r=function(t,n){e.$on(t,n)},a=function(n,r){void 0===e[t]&&(e[t]={}),e[t][n]=r},i=function(n){var r=null;return e[t]&&void 0!==e[t][n]&&(r=e[t][n]),r},o={emit:n,on:r,set:a,get:i};return o}]),angular.module(\"ev-fdm\").service(\"DownloadService\",[\"$document\",function(e){var t=null;return{download:function(n){t||(t=e[0].createElement(\"iframe\"),t.style.display=\"none\",e[0].body.appendChild(t)),t.src=n}}}]),angular.module(\"ev-fdm\").service(\"FilteringService\",[\"$location\",function(){var e={};return{setSelectedFilter:function(t,n){e[t]=void 0!=n&&\"undefined\"!=n?n:\"\"},getSelectedFilter:function(t){var n=\"\";return\"undefined\"!=typeof e[t]&&\"undefined\"!=e[t]&&(n=e[t]),n},getAllFilters:function(){return e}}}]);var module=angular.module(\"ev-fdm\"),ModalService=function(e,t,n,r){this.$rootScope=e,this.$templateCache=t,this.$compile=n,this.$controller=r};ModalService.prototype.open=function(e){e=this._readOptions(e);var t=(e.parentScope||this.$rootScope).$new();t=_(t).extend(e.scope);var n;e.controller&&(n=this.$controller(e.controller,{$scope:t}));var r=this.$compile(e.template||this.$templateCache.get(e.templateUrl))(t);return r.$scope=t,r.$controller=n,n&&(n.$modal=r),$(r).modal(e)},ModalService.prototype._readOptions=function(e){if(e=_({backdrop:!0,scope:{},keyboard:!0}).extend(e),!e.templateUrl&&!e.template)throw new Error(\"Either template or templateUrl have to be defined\");\nreturn e},module.service(\"ModalService\",[\"$rootScope\",\"$templateCache\",\"$compile\",\"$controller\",ModalService]);var module=angular.module(\"ev-fdm\");module.service(\"NotificationsService\",[\"$timeout\",function(e){function t(e){e.type||(e.type=c.SUCCESS),a(e)}function n(e){o=_(o).without(e),r()}function r(){if(o.length){var t=o[0];i.activeNotification!==t&&(i.activeNotification=t,-1!==t.delay&&e(function(){n(t)},1e3*(t.delay||l)))}else i.activeNotification=null}function a(e){o.push(e),r()}var i=this,o=[],l=5,c={SUCCESS:0,ERROR:1,INFO:2,WARNING:3};this.activeNotification=null,this.add=t,this.remove=n,this.addError=function(e){e.type=c.ERROR,t(e)},this.addSuccess=function(e){e.type=c.SUCCESS,t(e)},this.type=c}]);var module=angular.module(\"ev-fdm\");module.service(\"PanelService\",[\"$animate\",\"$q\",\"$http\",\"$templateCache\",\"$compile\",\"$rootScope\",\"$timeout\",\"$window\",\"PanelLayoutEngine\",function(e,t,n,r,a,i,o,l,c){function s(e){var t=v[e];return t?\"width: \"+t+\"px;\":\"\"}function u(e){return e.template||e.templateURL?t.when(e.template):n.get(e.templateUrl,{cache:r}).then(function(e){return e.data})}function d(e){var t=angular.element(m).children(),n=e-1;return!e||e>t.length?n=t.length-1:1>e&&(n=0),n}function f(e){var t=angular.element(m).children(),n=t[e];return n?angular.element(n):null}function g(e){var t=angular.element(m).children(\".ev-panel-placeholder\");if(e)for(var n=0;n<t.length;n++){var r=t[n];if(e==r){t.splice(n,1),t.push(e);break}}c.checkStacking(t)}var m=null,v=window.stylesCache={};self=this,this.panels={},this.open=function(t){if(!t.name&&t.panelName&&(console.log(\"Deprecated: use name instead of panelName\"),t.name=t.panelName),!t)return void console.log(\"A panel must have a name (options.name)\");var n=t.name;if(self.panels[n]){var r=self.panels[n];r.index=t.index;var o=d(t.index),l=f(o);return r.element.css(\"z-index\",2e3+o),e.move(r.element,m,l,function(){g()}),self.panels[n]}var c=angular.element('<div class=\"ev-panel-placeholder ev-panel-placeholder-'+n+'\" ev-panel-breakpoints style=\"'+s(n,t)+'\"   ><div class=\"ev-panel\" ><div class=\"ev-panel-inner\"><div class=\"ev-panel-content\"></div></div></div></div>'),p=u(t);return self.panels[n]=t,t.element=c,t.element.css(\"z-index\",2e3+t.index),p.then(function(n){c.find(\".ev-panel-content\").html(n),c=a(c)(i.$new()),t.element=c;var r=d(t.index),o=f(r);return c.on(\"resizestop\",function(e,n){n.originalSize;$(this).css(\"height\",\"\"),v[t.panelName]=n.size.width,g(self)}).on(\"resize\",function(){return!1}),e.enter(c,m,o,function(){g()}),t})},this.close=function(t){t&&self.panels[t]||console.log(\"Panel not found for:\"+t);var n=self.panels[t].element;self.panels[t]=null,e.leave(n,function(){g()})},this.registerContainer=function(e){m=e};var p=null;return angular.element(l).on(\"resize\",function(){null!==p&&o.cancel(p),p=o(function(){g()},100)}),this}]).directive(\"evPanels\",[\"PanelService\",function(e){return{restrict:\"AE\",scope:{},replace:!0,template:'<div class=\"ev-panels ev-panels-container lisette-module\"><div></div></div>',link:function(t,n){e.registerContainer(n)}}}]);var module=angular.module(\"ev-fdm\"),SidonieModalService=function(e,t,n){function r(t,r,a){var i=o(t),s=i.multi,u=i.opened;if(a.windowClass||(a.windowClass=\" fade \"),a.windowClass+=\" \"+t,a.templateUrl||a.template||(a.templateUrl=r+\".phtml\"),a.backdrop=t==SidonieModalService.REGION_MIDDLE,s)throw new Error(\"Multi not implemented yet\");if(u.length){var d=u[u.length-1];if(d.status==SidonieModalService.STATUS_LOCKED)return n.warn(\"Open modal aborted due to \"+d.sidonieModalType+\"'s locked status\"),c(d),!1;if(d.sidonieModalType!=r){d.modal(\"hide\");var f=e.open(a);return f.sidonieModalType=r,f.result.finally(l(t,f)),i.opened=[f],f}return d}var f=e.open(a);return f.sidonieModalType=r,f.result.finally(l(t,f)),i.opened=[f],f}function a(){var e=!1;return angular.forEach(s,function(t){angular.forEach(t.opened,function(t){e||t.status==SidonieModalService.STATUS_LOCKED&&(c(t),n.warn(\"Open modal aborted due to \"+t.sidonieModalType+\"'s locked status\"),e=t)})}),e?e:(angular.forEach(s,function(e){angular.forEach(e.opened,function(e){try{e.close()}catch(t){}})}),!0)}function i(e,t){var n=o(e);if(n.modals.length){var r=n.modals[n.modals.length-1];return t&&r.sidonieModalType!=t?!1:r}}function o(e){var t=s[e];if(\"undefined\"==typeof t)throw new Error(\"Unknown region \"+e);return t}function l(e,t){return function(){var n=o(e);angular.forEach(n.opened,function(e){t==e&&(n.opened=_(n.opened).without(t))})}}function c(e){t.addClass(e,\"modal-locked\",function(){t.removeClass(e,\"modal-locked\")})}var s={};return s[SidonieModalService.REGION_RIGHT]={multi:!1,opened:[]},s[SidonieModalService.REGION_MIDDLE]={multi:!1,opened:[]},{open:r,openRight:function(e,t){r(SidonieModalService.REGION_RIGHT,e,t)},openMiddle:function(e,t){r(SidonieModalService.REGION_MIDDLE,e,t)},get:i,closeAll:a}};SidonieModalService.STATUS_LOCKED=\"locked\",SidonieModalService.REGION_RIGHT=\"right\",SidonieModalService.REGION_MIDDLE=\"middle\",module.service(\"SidonieModalService\",[\"$modal\",\"$animate\",\"$log\",SidonieModalService]);var module=angular.module(\"ev-fdm\");module.service(\"SortService\",[function(){var e=\"\",t=!1,n=function(){return e},r=function(n){return n==e?t=!t:e=n,this},a=function(n){var r=\"sort \";return r+=n==e?t?\"sort-up\":\"sort-down\":\"no-sort\"},i=function(e){t=e},t=function(){return t};return{sortBy:r,getSortCSS:a,getCurrentSort:n,setReverse:i,isReverse:t}}]);var module=angular.module(\"ev-fdm\"),AbstractAutocompleteStorage=function(e,t){_.extend(this,e),this.AbstractStorage=e,this.$timeout=t};AbstractAutocompleteStorage.prototype.generateAutocompleteConfig=function(e,t,n){var r,a=this;return{minimumInputLength:n,allowClear:!0,initSelection:function(){return\"\"},query:function(n){var i=n.term;r&&a.$timeout.cancel(r),r=a.$timeout(function(){e.call(a,i.toUpperCase()).then(function(e){var r=t(e);n.callback({results:r})})},600)}}},module.service(\"AbstractAutocompleteStorage\",[\"Storage\",\"$timeout\",AbstractAutocompleteStorage]),angular.module(\"ev-fdm\").service(\"AjaxStorage\",[\"$http\",\"$q\",\"$cacheFactory\",\"$log\",AjaxStorage]),angular.module(\"ev-fdm\").factory(\"RestangularStorage\",[\"Restangular\",function(e){function t(t,n){this.restangular=e,this.resourceName=t,this.defaultEmbed=n||[]}return t.buildSortBy=function(e,t){var n=t?\"DESC\":\"ASC\";return e+\":\"+n},t.buildEmbed=function(e){return e.join(\",\")},t.buildFilters=function(e){var t={};return angular.forEach(e,function(e,n){angular.isObject(e)&&angular.isDefined(e.uuid)?t[n+\".uuid\"]=e.uuid:angular.isObject(e)&&angular.isDefined(e.id)?t[n+\".id\"]=e.id:angular.isArray(e)&&e.length>0?t[n]=e.join(\",\"):angular.isDate(e)?t[n]=e.toISOString():angular.isDefined(e)&&\"\"!==e&&null!==e&&(t[n]=e)}),t},t.prototype.getList=function(e,n,r,a,i){var o={};return angular.isNumber(e)&&e>0&&(o.page=e),angular.isArray(n)&&n.length?o.embed=t.buildEmbed(n.concat(this.defaultEmbed)):this.defaultEmbed.length&&(o.embed=t.buildEmbed(this.defaultEmbed)),a&&(o.sortBy=t.buildSortBy(a,i)),r&&(r=t.buildFilters(r),angular.extend(o,r)),this.restangular.all(this.resourceName).getList(o)},t.prototype.getById=function(e,n){var r={};return angular.isArray(n)&&n.length?r.embed=t.buildEmbed(n.concat(this.defaultEmbed)):this.defaultEmbed.length&&(r.embed=t.buildEmbed(this.defaultEmbed)),this.restangular.one(this.resourceName,e).get(r)},t.prototype.update=function(e,n){var r={};return angular.isArray(n)&&n.length?r.embed=t.buildEmbed(n.concat(this.defaultEmbed)):this.defaultEmbed.length&&(r.embed=t.buildEmbed(this.defaultEmbed)),e.put(r)},t.prototype.patch=function(e,n,r){var a={};return angular.isArray(r)&&r.length?a.embed=t.buildEmbed(r.concat(this.defaultEmbed)):this.defaultEmbed.length&&(a.embed=t.buildEmbed(this.defaultEmbed)),e.patch(n,a)},t.prototype.create=function(e,n){var r={};return angular.isArray(n)&&n.length?r.embed=t.buildEmbed(n.concat(this.defaultEmbed)):this.defaultEmbed.length&&(r.embed=t.buildEmbed(this.defaultEmbed)),this.restangular.all(this.resourceName).post(e,r)},t.prototype.delete=function(e){return e.remove()},t.prototype.save=function(e,n){var r={};return angular.isArray(n)&&n.length?r.embed=t.buildEmbed(n.concat(this.defaultEmbed)):this.defaultEmbed.length&&(r.embed=t.buildEmbed(this.defaultEmbed)),e.save(r)},t.prototype.getNew=function(){return this.restangular.one(this.resourceName)},t}]);var module=angular.module(\"ev-fdm\");module.service(\"Storage\",[\"AjaxStorage\",Storage]);var angularLocalStorage=angular.module(\"LocalStorageModule\",[]);angularLocalStorage.value(\"prefix\",\"ls\"),angularLocalStorage.constant(\"cookie\",{expiry:30,path:\"/\"}),angularLocalStorage.constant(\"notify\",{setItem:!0,removeItem:!1}),angularLocalStorage.service(\"localStorageService\",[\"$rootScope\",\"prefix\",\"cookie\",\"notify\",function(e,t,n,r){\".\"!==t.substr(-1)&&(t=t?t+\".\":\"\");var a=function(){try{return\"localStorage\"in window&&null!==window.localStorage}catch(t){return e.$broadcast(\"LocalStorageModule.notification.error\",t.message),!1}},i=function(n,i){if(!a())return e.$broadcast(\"LocalStorageModule.notification.warning\",\"LOCAL_STORAGE_NOT_SUPPORTED\"),r.setItem&&e.$broadcast(\"LocalStorageModule.notification.setitem\",{key:n,newvalue:i,storageType:\"cookie\"}),d(n,i);\"undefined\"==typeof i&&(i=null);try{(angular.isObject(i)||angular.isArray(i))&&(i=angular.toJson(i)),localStorage.setItem(t+n,i),r.setItem&&e.$broadcast(\"LocalStorageModule.notification.setitem\",{key:n,newvalue:i,storageType:\"localStorage\"})}catch(o){return e.$broadcast(\"LocalStorageModule.notification.error\",o.message),d(n,i)}return!0},o=function(n){if(!a())return e.$broadcast(\"LocalStorageModule.notification.warning\",\"LOCAL_STORAGE_NOT_SUPPORTED\"),f(n);var r=localStorage.getItem(t+n);return r?\"{\"===r.charAt(0)||\"[\"===r.charAt(0)?angular.fromJson(r):r:null},l=function(n){if(!a())return e.$broadcast(\"LocalStorageModule.notification.warning\",\"LOCAL_STORAGE_NOT_SUPPORTED\"),r.removeItem&&e.$broadcast(\"LocalStorageModule.notification.removeitem\",{key:n,storageType:\"cookie\"}),g(n);try{localStorage.removeItem(t+n),r.removeItem&&e.$broadcast(\"LocalStorageModule.notification.removeitem\",{key:n,storageType:\"localStorage\"})}catch(i){return e.$broadcast(\"LocalStorageModule.notification.error\",i.message),g(n)}return!0},c=function(){if(!a())return e.$broadcast(\"LocalStorageModule.notification.warning\",\"LOCAL_STORAGE_NOT_SUPPORTED\"),!1;var n=t.length,r=[];for(var i in localStorage)if(i.substr(0,n)===t)try{r.push(i.substr(n))}catch(o){return e.$broadcast(\"LocalStorageModule.notification.error\",o.Description),[]}return r},s=function(){if(!a())return e.$broadcast(\"LocalStorageModule.notification.warning\",\"LOCAL_STORAGE_NOT_SUPPORTED\"),m();var n=t.length;for(var r in localStorage)if(r.substr(0,n)===t)try{l(r.substr(n))}catch(i){return e.$broadcast(\"LocalStorageModule.notification.error\",i.message),m()}return!0},u=function(){try{return navigator.cookieEnabled||\"cookie\"in document&&(document.cookie.length>0||(document.cookie=\"test\").indexOf.call(document.cookie,\"test\")>-1)}catch(t){return e.$broadcast(\"LocalStorageModule.notification.error\",t.message),!1}},d=function(r,a){if(\"undefined\"==typeof a)return!1;if(!u())return e.$broadcast(\"LocalStorageModule.notification.error\",\"COOKIES_NOT_SUPPORTED\"),!1;try{var i=\"\",o=new Date;null===a&&(n.expiry=-1,a=\"\"),0!==n.expiry&&(o.setTime(o.getTime()+24*n.expiry*60*60*1e3),i=\"; expires=\"+o.toGMTString()),r&&(document.cookie=t+r+\"=\"+encodeURIComponent(a)+i+\"; path=\"+n.path)}catch(l){return e.$broadcast(\"LocalStorageModule.notification.error\",l.message),!1}return!0},f=function(n){if(!u())return e.$broadcast(\"LocalStorageModule.notification.error\",\"COOKIES_NOT_SUPPORTED\"),!1;for(var r=document.cookie.split(\";\"),a=0;a<r.length;a++){for(var i=r[a];\" \"==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t+n+\"=\"))return decodeURIComponent(i.substring(t.length+n.length+1,i.length))}return null},g=function(e){d(e,null)},m=function(){for(var e=null,n=t.length,r=document.cookie.split(\";\"),a=0;a<r.length;a++){for(e=r[a];\" \"==e.charAt(0);)e=e.substring(1,e.length);key=e.substring(n,e.indexOf(\"=\")),g(key)}};return{isSupported:a,set:i,add:i,get:o,keys:c,remove:l,clearAll:s,cookie:{set:d,add:d,get:f,remove:g,clearAll:m}}}]),angular.module(\"ev-fdm\").directive(\"disableValidation\",function(){return{require:\"^form\",restrict:\"A\",link:function(e,t,n,r){var a;e.$watch(n.disableValidation,function(e){a||(a=r[t.attr(\"name\")]),e===!1?(r.$addControl(a),angular.forEach(a.$error,function(e,t){r.$setValidity(t,!e,a)})):r.$removeControl(a)})}}}),angular.module(\"ev-fdm\").directive(\"strictMin\",function(){return{require:\"ngModel\",link:function(e,t,n,r){function a(e){var t=parseFloat(e),a=parseFloat(n.strictMin);return t>a?(r.$setValidity(\"strictMin\",!0),e):void r.$setValidity(\"strictMin\",!1)}r.$parsers.unshift(a),r.$formatters.push(a)}}});var module=angular.module(\"ev-fdm\");module.service(\"PanelLayoutEngine\",[\"$animate\",\"$rootScope\",\"$window\",function(e,t,n){function r(e){{var t=[];e.size()}return angular.forEach(e,function(e){var n=angular.element(e),r={minWidth:parseInt(n.children().first().css(\"min-width\"))||d,maxWidth:parseInt(n.children().first().css(\"max-width\"))||0,stacked:n.hasClass(\"stacked\"),width:n.width(),stackedWidth:d};r.width<r.minWidth&&(r.width=r.minWidth),r.width>r.maxWidth&&r.maxWidth>0&&(r.width=r.maxWidth),t.push(r)}),t}function a(e,t){for(var n=0,r=0,a=0,i=e.length,o=0,l=null;i>r;r++){for(o=0,a=0;i>a;a++)if(l=e[a],r>a)o+=l.stackedWidth;else{var c=l.minWidth;c<l.stackedWidth&&(c=l.stackedWidth),o+=c}o>t&&n++}return n}function i(e,t){for(var n=e.length,r=e.length,a=r,i=0,o=0,l=null;a>0;a--){for(o=0,i=0;r>i;i++)if(l=e[i],a>i)o+=l.stackedWidth;else{var c=l.maxWidth;c<l.stackedWidth&&(c=l.stackedWidth),o+=c}t>o&&n--}return n}function o(e,t){var n=a(e,t),r=i(e,t);angular.forEach(e,function(e){e.stacked=!1});var o=n;e.length-n>3&&e.length-r<=3&&(o=e.length-3);for(var l=0;o>l;l++)e[l].stacked=!0;return{nbStacked:o,datas:e}}function l(e,t){var n=0;angular.forEach(e,function(e){e.width<e.minWidth&&(e.width=e.minWidth),n+=e.stacked?e.stackedWidth:e.width});var r=t-n,a=e.length;data=null;for(var i=0;a>i;i++)if(data=e[i],data.stacked)data.width=data.stackedWidth;else{var o=data.width,l=data.width+r;if(data.width=data.minWidth>l?data.minWidth:0!==data.maxWidth&&data.maxWidth<l?data.maxWidth:data.width+r,r-=data.width-o,0===r)break}return e}function c(e,t){var n=o(e,t);return e=n.datas,n.nbStacked!==e.length&&(e=l(e,t)),e}function s(t,n,r){var a=!1,i=n[n.length-1];i.stacked===!0&&(i.stacked=!1,i.width=r,a=!0);t.size();t.css(\"left\",0),angular.forEach(t,function(t,r){var i=angular.element(t),o=n[r];return i?(i.hasClass(\"stacked\")&&!o.stacked?(e.removeClass(i,\"stacked\"),e.removeClass(i,\"stacked-mobile\")):!i.hasClass(\"stacked\")&&o.stacked&&(e.addClass(i,\"stacked\"),a&&e.addClass(i,\"stacked-mobile\")),void i.width(o.width+\"px\")):void console.log(\"no element for this panel)\")})}function u(e){var a=angular.element(\"body\"),i=a.css(\"overflow\");a.css(\"overflow\",\"hidden\");var o=angular.element(n).innerWidth();a.css(\"overflow\",i);var l=r(e),u=c(l,o);s(e,u,o),t.$broadcast(\"module-layout-changed\")}var d=35,f={checkStacking:u};return f}]);\n//# sourceMappingURL=ev-fdm-core.min.js.map","angular.module(\"ev-leaflet\",[\"leaflet-directive\"]).provider(\"evLeaflet\",function(){this.$get=function(){return{icons:this.icons}},this.setIcons=function(e){this.icons=e}}).directive(\"evLeaflet\",[\"leafletData\",\"evLeaflet\",\"$log\",function(e,a,t){return{template:'<leaflet class=\"ev-leaflet\" defaults=\"defaults\" markers=\"markers\" center=\"center\"></leaflet>',restrict:\"AE\",scope:{coordinate:\"=\",editable:\"=\"},controller:function(e){function r(){e.center={lat:e.markers.marker.lat,lng:e.markers.marker.lng,zoom:8}}var n={iconSize:[40,40],shadowSize:[1,1],iconAnchor:[1,20]},l=a.icons;\"default\"in l&&angular.extend(l.default,n),\"draggable\"in l&&angular.extend(l.draggable,n),e.defaults={scrollWheelZoom:!1,doubleClickZoom:!1},e.markers={marker:{focus:!0}},r(),e.$watch(\"coordinate.latitude\",function(a){isNaN(a)&&(a=0,t.warn(\"ev-leaflet: latitude is not a number\")),e.markers.marker.lat=a,r()}),e.$watch(\"coordinate.longitude\",function(a){isNaN(a)&&(a=0,t.warn(\"ev-leaflet: longitude is not a number\")),e.markers.marker.lng=a,r()}),e.$watch(\"markers.marker.lat\",function(a){e.coordinate.latitude=a}),e.$watch(\"markers.marker.lng\",function(a){e.coordinate.longitude=a}),e.$watch(\"editable\",function(){var a=e.editable;e.markers.marker.icon=a?l.draggable:l[\"default\"],e.markers.marker.draggable=a})}}}]);\n//# sourceMappingURL=ev-fdm-leaflet.min.js.map","angular.module(\"ev-tinymce\",[\"ui.tinymce\"]).directive(\"evTinymce\",[function(){return{template:'<div class=\"tiny-mce-wrapper\"><textarea ui-tinymce=\"tinymceFinalOptions\" ng-model=\"ngModel\" ng-required=\"ngRequired\"></textarea><span class=\"max-chars-info\">&nbsp;</span></div>',restrict:\"AE\",replace:!1,scope:{ngModel:\"=\",tinymceOptions:\"=\",ngRequired:\"&\"},controller:[\"$scope\",\"$attrs\",\"$element\",function(n,e,t){n.$on(\"module-layout-changed\",function(){var n=t.find(\"textarea\").attr(\"id\"),e=window.tinyMCE,a=e.get(n);if(a)try{a.remove(),e.execCommand(\"mceAddEditor\",!1,n)}catch(i){}});var a={menubar:!1,statusbar:!1,resize:!1,toolbar:\"bold italic underline | alignleft aligncenter alignright | bullist\",content_css:\"/bower_components/ev-fdm/dist/css/ev-fdm.min.css\",skin:!1,verify_html:!0,convert_fonts_to_spans:!0};n.tinymceFinalOptions=angular.extend({},a,n.tinymceOptions),n.tinymceFinalOptions.maxChars=e.maxChars||n.tinymceFinalOptions.maxChars||null;var i=85,r=function(n,e){var a=t.parent().find(\".max-chars-info\");a.text(n+\" / \"+e);var r=n/e*100>i,s=n>=e,l=\"max-chars-warning\",o=\"max-chars-reached\";r?a.addClass(l):a.removeClass(l),s?a.addClass(o):a.removeClass(o)},s=function(e){if(null!==n.tinymceFinalOptions.maxChars){var t=\"\",a=\"\",i=\"\",s=n.tinymceFinalOptions.maxChars;e.on(\"init\",function(){n.$watch(function(){return e.getContent()},function(e,l){t=angular.element(e).text(),a=t.length,i=angular.element(l).text();var o=i.length>s&&a>s;if(o){var c=i.substring(0,s);n.ngModel=c,a=c.length}else a>s&&(n.ngModel=l,a=angular.element(n.ngModel).text().length);r(a,s)})})}};n.tinymceFinalOptions.setup=s}]}}]);\n//# sourceMappingURL=ev-fdm-tinymce.min.js.map","!function(){\"use strict\";angular.module(\"ev-upload\",[\"ev-fdm\"])}(),function(){\"use strict\";angular.module(\"ev-upload\").directive(\"evPictureButtonUpload\",[\"NotificationsService\",\"$http\",function(e){return{restrict:\"AE\",scope:{pictureSuccess:\"&newPicture\",buttonText:\"@\",iconName:\"@\",url:\"@\"},template:'<ev-upload settings=\"settings\" file-success=\"pictureSuccess({picture: file})\"upload=\"newUpload(promise)\"><div ng-hide=\"uploading\"><button type=\"button\" class=\"btn btn-link ev-upload-clickable\"><span class=\"icon {{iconName}}\"></span>{{buttonText}}</button></div><div class=\"ev-picture-uploading\" ng-show=\"uploading\"><div class=\"ev-picture-upload-label\"> {{\"Upload en cours\"| i18n}} </div><div class=\"spinner\"></div><p> {{upload.done}} / {{upload.total}} {{ \"photo(s) uploadée(s)\" | i18n }} </p></div><div ng-show=\"uploading\" ev-promise-progress=\"uploadPromise\"></div></ev-upload>',link:function(e){e.settings={acceptedFiles:\"image/*\",url:e.url}},controller:function(n){n.$watch(\"url\",function(e){n.settings.url=e}),n.uploading=!1,n.newUpload=function(t){n.upload=null,n.uploading=!0,n.uploadPromise=t,t.then(function(){e.addSuccess({text:\"Les images ont été uploadées avec succès\"})},function(){e.add({type:e.type.WARNING,text:\"Certaines images n'ont pas pu être uploadées.\"})},function(e){n.upload=e}).finally(function(){n.uploading=!1})}}}}])}(),function(){\"use strict\";angular.module(\"ev-upload\").directive(\"evPictureUpload\",[\"NotificationsService\",\"$http\",function(e,n){return{restrict:\"AE\",scope:{pictureSuccess:\"&newPicture\",url:\"@\"},template:'<ev-upload settings=\"settings\" file-success=\"pictureSuccess({picture: file})\"class=\"ev-picture-upload\" upload=\"newUpload(promise)\"><div ng-hide=\"uploading\"><div class=\"ev-picture-upload-label\">{{ \"Faites glisser vos images ici\" | i18n }}</div><table style=\"width:100%\"><tr><td style=\"width:114px\"><button type=\"button\" class=\"btn btn-default ev-upload-clickable\">{{ \"Importer...\" | i18n}}</button></td><td style=\"width:30px´; line-height: 36px;\">{{ \"ou\" | i18n }}</td><td><form novalidate name=\"flickr\" ng-class=\"{\\'has-error\\': flickr.$dirty && flickr.$invalid}\"><input name=\"fUrl\" placeholder=\"{{\\'Lien Flickr\\' | i18n}}\" ng-model=\"$parent.flickrUrl\" ng-pattern=\"flickrUrlPattern\" required=\"\" class=\"form-control\" ng-change=\"uploadFlickrUrl(flickr)\"/><div ng-show=\"flickr.fUrl.$dirty && flickr.fUrl.$invalid\"><p class=\"control-label\" for=\"fUrl\" data-ng-show=\"flickr.fUrl.$error.pattern\">{{ \"L\\'url doit être une photo flickr\" | i18n}}</p></div></form></td></tr></table></div><div class=\"ev-picture-uploading\" ng-show=\"uploading\"><div class=\"ev-picture-upload-label\"> {{\"Upload en cours\"| i18n}} </div><div class=\"spinner\"></div><p> {{upload.done}} / {{upload.total}} {{ \"photo(s) uploadée(s)\" | i18n }} </p></div><div ng-show=\"uploading\" ev-promise-progress=\"uploadPromise\"></div></ev-upload>',link:function(e){e.flickrUrlPattern=/^(https\\:\\/\\/)?www\\.flickr\\.com\\/photos\\/.*\\/\\d+.*$/,e.settings={acceptedFiles:\"image/*\",url:e.url}},controller:function(t){t.$watch(\"url\",function(e){t.settings.url=e}),t.uploading=!1,t.uploadFlickrUrl=function(e){if(e.$valid){var l=/(https\\:\\/\\/)?www\\.flickr\\.com\\/photos\\/.*\\/\\d+/.exec(t.flickrUrl)[0],o=n.post(t.url,{\"flickr-url\":l});o.success(function(e){t.pictureSuccess({picture:e})}).success(function(){e.$setPristine(),t.flickrUrl=\"\"}),t.newUpload(o),t.upload={done:0,total:1,progress:0}}},t.newUpload=function(n){t.upload=null,t.uploading=!0,t.uploadPromise=n,n.then(function(){e.addSuccess({text:\"Les images ont été uploadées avec succès\"})},function(){e.add({type:e.type.WARNING,text:\"Certaines images n'ont pas pu être uploadées.\"})},function(e){t.upload=e}).finally(function(){t.uploading=!1})}}}}])}(),function(e){\"use strict\";angular.module(\"ev-upload\").directive(\"evUpload\",[\"$log\",\"$q\",\"$timeout\",function(n,t,l){var o={previewTemplate:!1,previewsContainer:!1,autoQueue:!0,maxFilesize:12,maxFiles:100,uploadMultiple:!1,parallelUploads:3};return{transclude:!0,restrict:\"EA\",replace:!0,scope:{settings:\"=\",uploadStart:\"&upload\",fileSuccess:\"&\",fileAdded:\"&\"},template:'<div class=\"ev-upload\"><div ng-transclude> </div></div>',link:function(i,r){function u(e){return s.getAcceptedFiles().reduce(function(n,t){return n+t.upload[e]},0)}function a(){var e=r.find(\".ev-upload-dropzone\");return 0===e.length&&(e=r),e.addClass(\"dz-default\"),e.addClass(\"dz-message\"),e[0]}function d(){return r.find(\".ev-upload-clickable\")[0]}function c(n){p={done:0,progress:0};var o=function(){p.progress=100*u(\"bytesSent\")/u(\"total\"),p.total=s.getAcceptedFiles().length,i.deferred.notify(p)};s.off(\"uploadprogress\",o).off(\"maxfilesexceeded\");var i={deferred:t.defer(),hasFileErrored:!1};o(),s.once(\"error\",function(){i.hasFileErrored=!0}),s.on(\"uploadprogress\",o);var r=function(){return!s.files.filter(function(n){return n.status===e.QUEUED||n.status===e.ADDED||n.status===e.UPLOADING}).length},a=function(){n.$apply(function(){l(function(){r()&&(s.off(\"complete\",a),l(function(){i.hasFileErrored?i.deferred.reject(\"filehaserrored\"):i.deferred.resolve()}))})})};s.on(\"maxfilesexceeded\",function(){i.deferred.reject(\"maxfilesexceeded\")}),s.on(\"complete\",a),n.currentUpload=i.deferred.promise,n.uploadStart({promise:i.deferred.promise}),n.currentUpload.finally(function(){s.removeAllFiles(!0),n.currentUpload=null})}i.fileSuccess=i.fileSuccess||function(){},i.fileAdded=i.fileAdded||function(){};var s=null,p=null,f={};i.$watch(\"settings\",function(l){return l.url?(null!==s&&s.destroy(),l=angular.extend(o,l),s=new e(a(),angular.extend({clickable:d()},l)),i.currentUpload=null,s.on(\"addedfile\",function(e){null===i.currentUpload&&i.$apply(c);var n=t.defer();f[e.name]=n;var l=function(){s.removeFile(e)};i.$apply(function(t){t.fileAdded({dropzoneFile:e,promise:n.promise,cancel:l})})}),s.on(\"uploadprogress\",function(e,n){i.$apply(function(){f[e.name].notify(n)})}),s.on(\"success\",function(e,n){i.$apply(function(t){f[e.name].resolve({file:n}),t.fileSuccess({file:n})})}),s.on(\"error\",function(e,n,t){n||500!==t.status||(n=l.dictResponseError||\"Unexpected error during the upload\"),\"Upload canceled.\"===n&&(n=l.dictCanceledUpload||\"The upload has been canceled\"),i.$apply(function(){f[e.name].reject(n)})}),s.on(\"canceled\",function(e){var n=f[e.name];i.$apply(function(){n.reject(l.dictCanceledUpload||\"The upload has been canceled\")})}),void s.on(\"complete\",function(){angular.isDefined(p)&&(p.done+=1)})):void n.warn(\"No url provided to the upload zone\")},!0),i.$on(\"$destroy\",function(){s.destroy()})}}}])}(Dropzone);\n//# sourceMappingURL=ev-fdm-upload.min.js.map"],"sourceRoot":"/source/"}