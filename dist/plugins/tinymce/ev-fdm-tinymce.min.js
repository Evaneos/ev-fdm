angular.module("ev-tinymce",["ui.tinymce"]).directive("evTinymce",[function(){return{template:'<div class="tiny-mce-wrapper"><textarea ui-tinymce="tinymceFinalOptions" ng-model="ngModel"></textarea><span class="max-chars-info">&nbsp;</span></div>',restrict:"AE",replace:!1,scope:{ngModel:"=",tinymceOptions:"="},controller:["$scope","$attrs","$element","i18n",function(n,e,t,a){var i={menubar:!1,statusbar:!1,resize:!1,toolbar:"bold italic underline | alignleft aligncenter alignright | bullist",content_css:"/bower_components/ev-fdm/dist/css/ev-fdm.min.css",skin:!1,verify_html:!0,convert_fonts_to_spans:!0};n.tinymceFinalOptions=angular.extend({},i,n.tinymceOptions),n.tinymceFinalOptions.maxChars=e.maxChars||n.tinymceFinalOptions.maxChars||null;var s=85,r=function(n,e){var i=t.parent().find(".max-chars-info");i.text(n+" / "+e);var r=n/e*100>s,l=n>=e,c="max-chars-warning",o="max-chars-reached";r?i.addClass(c):i.removeClass(c),l?(i.text(a("Nombre de caractÃ¨res max atteint : ")+i.text()),i.addClass(o)):i.removeClass(o)},l=function(e){if(null!==n.tinymceFinalOptions.maxChars){var t="",a="",i="",s=n.tinymceFinalOptions.maxChars;e.on("init",function(){n.$watch(function(){return e.getContent()},function(e,l){t=angular.element(e).text(),a=t.length,i=angular.element(l).text();var c=i.length>s&&a>s;if(c){var o=i.substring(0,s);n.ngModel=o,a=o.length}else a>s&&(n.ngModel=l,a=angular.element(n.ngModel).text().length);r(a,s)})})}};n.tinymceFinalOptions.setup=l}]}}]);