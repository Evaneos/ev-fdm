!function(e){var t={menubar:!1,statusbar:!1,toolbar:"bold italic underline | alignleft aligncenter alignright | bullist",skin:!1,verify_html:!0,convert_fonts_to_spans:!0,inline:!0};angular.module("ev-tinymce",[]).directive("evTinymce",[function(){var n=0;return{template:'<div class="tiny-mce-wrapper"><div class="ev-placeholder-container"></div><div class="ev-tinymce-content"></div><div ng-click="focusTinymce()" class="ev-tinymce-toolbar"></div><div class="max-chars-info"></div></div>',restrict:"AE",replace:!0,require:"?ngModel",scope:{tinymceOptions:"="},link:function(i,a,o,c){var r="uiTinymce"+n++,l=a.find(".ev-tinymce-content");l.attr("id",r),a.find(".ev-tinymce-toolbar").attr("id",r+"toolbar");var s,d=function(){return s||(s=e.get(r)),s},m=angular.extend({fixed_toolbar_container:"#"+r+"toolbar"},t,i.tinymceOptions);m.maxChars=o.maxChars||m.maxChars||null;var u=85,v=function(e,t){var n=a.parent().find(".max-chars-info");n.text(e+" / "+t);var i=e/t*100>u,o=e>=t;n.toggleClass("max-chars-warning",i),n.toggleClass("max-chars-reached",o)},g=!1,f=!1,p="",h="",C=m.maxChars,x=function(){var e=d();e.setContent('<span class="placeholder-light">'+o.placeholder+"</span>")},b=function(e){var t=d();g?h===o.placeholder&&t.setContent(""):e!==o.placeholder&&x()},y=function(){var e=d(),t=l.html(),n=l.text(),i=C&&n.length>C,a=C&&h.length>C;if(f&&n===o.placeholder)p=t,h=n;else if(!i||!a&&h.length)a&&i?e.setContent(p):(c.$setViewValue(t),p=t,h=n);else{var r=n.substr(0,C);e.setContent(r,{format:"text"})}C&&v(h.length,C),f=""===n||n===o.placeholder,f&&o.placeholder&&b(n)};c.$render=function(){var e=d();e&&(c.$viewValue?e.setContent(c.$viewValue):o.placeholder&&(f=!0,x()))},i.focusTinymce=function(){var e=d();e&&e.focus()};var w=function(e){e.on("init",function(){c.$viewValue&&c.$render()}),e.on("ExecCommand",function(){y()}),e.on("KeyUp",function(){y()}),e.on("SetContent",function(e){e.initial||y()}),e.on("blur",function(){g=!1,l.blur(),y()}),e.on("focus",function(){g=!0,y()})};m.setup=w,m.elems=r,m.mode="exact",e.init(m),i.$on("$destroy",function(){var e=d();e&&e.destroy()}),e.execCommand("mceToggleEditor",!1,r)}}}])}(window.tinyMCE),tinymce.PluginManager.add("evelements",function(e){function t(t){return function(){var n=e.dom,i=e.selection.getNode();i&&i.nodeName.toLowerCase()===t?n.remove(i,!0):e.insertContent(n.createHTML(t,{},n.encode(e.selection.getContent())))}}e.settings.evelements.split(" ").forEach(function(n){e.addButton("ev"+n,{text:n,tooltip:"Set this text as "+n,onclick:t(n),stateSelector:n})})}),tinymce.PluginManager.add("evimage",function(e){function t(){var t,n=e.dom,i=e.selection.getNode();t=i&&"img"===i.nodeName.toLowerCase()?{src:n.getAttrib(i,"src"),alt:n.getAttrib(i,"alt"),"class":n.getAttrib(i,"class"),dataPictureId:n.getAttrib(i,"data-picture-id")}:!1,e.settings.evimage(t,function(t){i?n.setAttribs(i,t):e.insertContent(n.create("img",t))})}e.addButton("evimage",{icon:"image",tooltip:"Insert/edit image",onclick:t,stateSelector:"img[data-picture-id]:not([data-mce-object],[data-mce-placeholder])"}),e.addMenuItem("evimage",{icon:"image",text:"Insert image",onclick:t,context:"insert",prependToContext:!0}),e.addCommand("mceImage",t)});
//# sourceMappingURL=ev-fdm-tinymce.min.js.map