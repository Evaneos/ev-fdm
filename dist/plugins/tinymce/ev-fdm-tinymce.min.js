!function(e){var n={menubar:!1,statusbar:!1,toolbar:"bold italic underline | alignleft aligncenter alignright | bullist",skin:!1,verify_html:!0,convert_fonts_to_spans:!0,inline:!0};angular.module("ev-tinymce",[]).directive("evTinymce",[function(){var t=0;return{template:'<div class="tiny-mce-wrapper"><div class="ev-placeholder-container"></div><div class="ev-tinymce-content"></div><div ng-click="focusTinymce()" class="ev-tinymce-toolbar"></div><div class="max-chars-info"></div></div>',restrict:"AE",replace:!0,require:"?ngModel",scope:{tinymceOptions:"="},link:function(i,a,o,r){var l="uiTinymce"+t++,c=a.find(".ev-tinymce-content");c.attr("id",l),a.find(".ev-tinymce-toolbar").attr("id",l+"toolbar");var s,u=function(){return s||(s=e.get(l)),s},d=angular.extend({fixed_toolbar_container:"#"+l+"toolbar"},n,i.tinymceOptions);d.maxChars=o.maxChars||d.maxChars||null;var v=85,f=function(e,n){var t=a.parent().find(".max-chars-info");t.text(e+" / "+n);var i=e/n*100>v,o=e>=n;t.toggleClass("max-chars-warning",i),t.toggleClass("max-chars-reached",o)},m=!1,h=!1,p="",g="",y=d.maxChars,x=function(){var e=u();e.setContent('<span class="placeholder-light">'+o.placeholder+"</span>")},C=function(e){var n=u();m?g===o.placeholder&&n.setContent(""):e!==o.placeholder&&x()},b=function(){var e=u(),n=c.html(),t=c.text(),i=y&&t.length>y,a=y&&g.length>y;if(h&&t===o.placeholder)p=n,g=t;else if(!i||!a&&g.length)a&&i?e.setContent(p):(r.$setViewValue(n),p=n,g=t);else{var l=t.substr(0,y);e.setContent(l,{format:"text"})}y&&f(g.length,y),h=""===t||t===o.placeholder,h&&o.placeholder&&C(t)};r.$render=function(){var e=u();e&&(r.$viewValue?e.setContent(r.$viewValue):o.placeholder&&(h=!0,x()))},i.focusTinymce=function(){var e=u();e&&e.focus()};var w=function(e){e.on("init",function(){r.$viewValue&&r.$render()}),e.on("ExecCommand",function(){b()}),e.on("KeyUp",function(){b()}),e.on("SetContent",function(e){e.initial||b()}),e.on("blur",function(){m=!1,c.blur(),b()}),e.on("focus",function(){m=!0,b()})};d.setup=w,d.elems=l,d.mode="exact",e.init(d),i.$on("$destroy",function(){var e=u();e&&e.destroy()}),e.execCommand("mceToggleEditor",!1,l)}}}])}(window.tinyMCE);
//# sourceMappingURL=ev-fdm-tinymce.min.js.map