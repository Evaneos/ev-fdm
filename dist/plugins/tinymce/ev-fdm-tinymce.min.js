angular.module("ev-tinymce",["ui.tinymce"]).directive("evTinymce",[function(){return{template:'<div class="tiny-mce-wrapper"><textarea ui-tinymce="tinymceFinalOptions" ng-model="ngModel" ng-required="ngRequired"></textarea><span class="max-chars-info">&nbsp;</span></div>',restrict:"AE",replace:!1,scope:{ngModel:"=",tinymceOptions:"=",ngRequired:"&"},controller:["$scope","$attrs","$element",function(n,e,t){n.$on("module-layout-changed",function(){var n=t.find("textarea").attr("id"),e=window.tinyMCE,a=e.get(n);if(a)try{a.remove(),e.execCommand("mceAddEditor",!1,n)}catch(i){}});var a={menubar:!1,statusbar:!1,resize:!1,toolbar:"bold italic underline | alignleft aligncenter alignright | bullist",content_css:"/bower_components/ev-fdm/dist/css/ev-fdm.min.css",skin:!1,verify_html:!0,convert_fonts_to_spans:!0};n.tinymceFinalOptions=angular.extend({},a,n.tinymceOptions),n.tinymceFinalOptions.maxChars=e.maxChars||n.tinymceFinalOptions.maxChars||null;var i=85,r=function(n,e){var a=t.parent().find(".max-chars-info");a.text(n+" / "+e);var r=n/e*100>i,s=n>=e,l="max-chars-warning",o="max-chars-reached";r?a.addClass(l):a.removeClass(l),s?a.addClass(o):a.removeClass(o)},s=function(e){if(null!==n.tinymceFinalOptions.maxChars){var t="",a="",i="",s=n.tinymceFinalOptions.maxChars;e.on("init",function(){n.$watch(function(){return e.getContent()},function(e,l){t=angular.element(e).text(),a=t.length,i=angular.element(l).text();var o=i.length>s&&a>s;if(o){var c=i.substring(0,s);n.ngModel=c,a=c.length}else a>s&&(n.ngModel=l,a=angular.element(n.ngModel).text().length);r(a,s)})})}};n.tinymceFinalOptions.setup=s}]}}]);
//# sourceMappingURL=ev-fdm-tinymce.min.js.map